---
branch: feature/settings-redesign
task: 0 of 14
status: planning_complete
last_updated: 2026-02-28T22:40:00Z
---

# Settings Redesign — Session Handoff

## Current State

Branch `feature/settings-redesign` created from `main`. Plan written and approved. Interactive HTML mockup created and reviewed by user. **No implementation started yet** — all 14 tasks are pending.

## What Was Done This Session

1. Explored both DOCSight settings UI and Tribu UI design language via subagents
2. Brainstorming session with user — decided on:
   - **Complete rebuild** (not just visual refresh)
   - **Sidebar navigation** (Core fixed + Modules dynamic + Module Store)
   - **Tribu design system** (void-dark palette, glass morphism, gradient accents, Outfit font)
3. Created interactive mockup at `mockup-settings.html` (standalone HTML, all panels clickable, dark+light theme)
4. User approved the mockup design
5. Wrote detailed implementation plan at `docs/plans/2026-02-28-settings-redesign.md`

## Implementation Plan Summary (14 Tasks)

| # | Task | Files |
|---|------|-------|
| 1 | Replace settings.css with Tribu Design System | `app/static/css/settings.css` |
| 2 | Restructure settings.html main template | `app/templates/settings.html` |
| 3 | Create connection.html (modem + ISP) | Create `settings/connection.html`, delete `modem.html` |
| 4 | Create system.html (polling, locale) | Create `settings/system.html` |
| 5 | Create security.html (password, tokens) | Create `settings/security.html`, delete `general.html` |
| 6 | Update notifications.html | `settings/notifications.html` |
| 7 | Update appearance.html | `settings/appearance.html` |
| 8 | Update support.html | `settings/support.html` |
| 9 | Update modules.html (Module Store) | `settings/modules.html` |
| 10 | Update all module settings templates | `app/modules/*/templates/*.html` (7 modules) |
| 11 | Update settings.js | `app/static/js/settings.js` |
| 12 | Update _module_card.html | `settings/_module_card.html` |
| 13 | Local verification (Docker build + test) | Run tests, check UI |
| 14 | Clean up mockup file | Remove `mockup-settings.html` |

## Critical Constraints

- **All `name=` attributes on form inputs MUST stay identical** (backend relies on them)
- **All `id=` attributes for test results** (`modem-test`, `mqtt-test`, etc.) MUST stay identical
- **Module panel IDs** stay `panel-mod-{module.id.replace('.', '_')}`
- **Jinja2 variables** (`{{ config.* }}`, `{{ t.* }}`) stay identical
- **No backend changes** — pure frontend refactor
- **No Co-Authored-By** in commits
- **Plan file (`docs/plans/`) must NOT be committed** to the repo

## Key Architecture Decisions

1. **Sidebar split**: Core (Connection, System, Notifications, Appearance, Security) + Modules (dynamic from enabled modules with ON/OFF badges) + Module Store + Support at bottom
2. **general.html split into 3**: connection.html (modem+ISP), system.html (polling+locale), security.html (password+tokens)
3. **Module system**: Modules already register settings via `manifest.json` → `contributes.settings`. Template inclusion via Jinja2 ChoiceLoader. No backend changes needed.
4. **CSS**: Complete replacement with Tribu design tokens (void palette, 24px blur glass, gradient buttons, mesh background)
5. **Fonts**: Adding Outfit + JetBrains Mono via @import

## Reference Files

- **Mockup** (visual reference): `mockup-settings.html` in repo root
- **Plan**: `docs/plans/2026-02-28-settings-redesign.md`
- **Current CSS**: `app/static/css/settings.css` (719 lines, to be replaced)
- **Current JS**: `app/static/js/settings.js` (~911 lines, to be updated)
- **Main template**: `app/templates/settings.html` (263 lines, to be rewritten)
- **Module loader**: `app/module_loader.py` (template registration flow)

## Next Action

Start with **Task 1**: Replace `app/static/css/settings.css` with the Tribu design system CSS. Use the mockup's `<style>` block as base, then add missing pieces (`.test-result`, `.toast`, `.module-restart-banner`, browse modal, mobile breakpoints) from the old CSS.

Then proceed sequentially through Tasks 2-14 with commits after each task.
