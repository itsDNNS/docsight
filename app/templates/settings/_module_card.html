<div class="settings-card module-card" data-module-id="{{ mod.id }}">
    <div class="settings-card-header">
        <div class="settings-card-icon">
            {% if mod.type == 'integration' %}
            <i data-lucide="plug"></i>
            {% elif mod.type == 'driver' %}
            <i data-lucide="cpu"></i>
            {% elif mod.type == 'analysis' %}
            <i data-lucide="bar-chart-2"></i>
            {% elif mod.type == 'theme' %}
            <i data-lucide="palette"></i>
            {% else %}
            <i data-lucide="puzzle"></i>
            {% endif %}
        </div>
        <div style="flex:1;">
            <div class="settings-card-title">
                {{ mod.name }}
                <span class="module-badge {% if mod.builtin %}badge-builtin{% else %}badge-community{% endif %}">
                    {{ t.modules_builtin if mod.builtin else t.modules_community }}
                </span>
                {% if mod.error %}
                <span class="module-badge badge-error">{{ t.modules_error }}</span>
                {% endif %}
                {% if 'thresholds' in mod.contributes and mod.enabled %}
                <span class="module-badge badge-builtin">{{ t.modules_active_profile }}</span>
                {% endif %}
            </div>
            <div class="settings-card-desc">{{ mod.description }}</div>
        </div>
        <label class="toggle-switch module-toggle">
            <input type="checkbox" class="module-toggle-input"
                   data-module-id="{{ mod.id }}"
                   {% if mod.enabled %}checked{% endif %}>
            <span class="toggle-slider"></span>
        </label>
    </div>

    <div class="module-meta">
        <span><strong>{{ t.modules_version }}:</strong> {{ mod.version }}</span>
        <span><strong>{{ t.modules_author }}:</strong> {{ mod.author }}</span>
        <span><strong>{{ t.modules_type }}:</strong> {{ mod.type }}</span>
        {% if mod.homepage %}
        <a href="{{ mod.homepage }}" target="_blank" rel="noopener">{{ t.modules_homepage }} â†—</a>
        {% endif %}
    </div>

    {% if mod.error %}
    <div class="module-error">
        <i data-lucide="alert-circle"></i>
        {{ mod.error }}
    </div>
    {% endif %}
</div>
