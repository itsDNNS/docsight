<div class="module-card glass {{ 'active' if mod.enabled }}" data-module-id="{{ mod.id }}">
    <div class="module-card-header">
        <div class="card-icon {% if mod.type == 'integration' %}purple{% elif mod.type == 'driver' %}blue{% elif mod.type == 'analysis' %}green{% else %}purple{% endif %}">
            {% if mod.type == 'integration' %}
            <i data-lucide="plug"></i>
            {% elif mod.type == 'driver' %}
            <i data-lucide="cpu"></i>
            {% elif mod.type == 'analysis' %}
            <i data-lucide="bar-chart-2"></i>
            {% elif mod.type == 'theme' %}
            <i data-lucide="palette"></i>
            {% else %}
            <i data-lucide="puzzle"></i>
            {% endif %}
        </div>
        <label class="toggle module-toggle">
            <input type="checkbox" class="module-toggle-input"
                   data-module-id="{{ mod.id }}"
                   {% if mod.enabled %}checked{% endif %}>
            <span class="toggle-slider"></span>
        </label>
    </div>
    <div class="module-card-title">
        {{ mod.name }}
        <span class="module-badge {% if mod.builtin %}badge-builtin{% else %}badge-community{% endif %}">
            {{ t.modules_builtin if mod.builtin else t.modules_community }}
        </span>
        {% if mod.error %}
        <span class="module-badge badge-error">{{ t.modules_error }}</span>
        {% endif %}
        {% if 'thresholds' in mod.contributes and mod.enabled %}
        <span class="module-badge badge-builtin">{{ t.modules_active_profile }}</span>
        {% endif %}
    </div>
    <div class="module-card-desc">{{ mod.description }}</div>
    <div class="module-card-meta">
        <span>v{{ mod.version }}</span>
        <span>{{ mod.author }}</span>
        {% if mod.homepage %}
        <a href="{{ mod.homepage }}" target="_blank" rel="noopener" style="color:var(--amethyst-light);text-decoration:none;">{{ t.modules_homepage }} &nearr;</a>
        {% endif %}
    </div>
    {% if mod.error %}
    <div class="module-error">
        <i data-lucide="alert-circle"></i>
        {{ mod.error }}
    </div>
    {% endif %}
</div>
