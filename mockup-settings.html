<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DOCSight Settings — Redesign Mockup</title>
<style>
/* ═══════════════════════════════════════════════
   TRIBU DESIGN SYSTEM — Applied to DOCSight
   ═══════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  /* Void palette */
  --void: #06080f;
  --void-deep: #0a0d18;
  --surface: #111628;
  --elevated: #181e35;
  --hover: #1f2847;

  /* Accent */
  --amethyst: #7c3aed;
  --amethyst-light: #a78bfa;
  --sapphire: #3b82f6;
  --grad-primary: linear-gradient(135deg, #7c3aed 0%, #3b82f6 100%);

  /* Semantic */
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  --info: #06b6d4;

  /* Text */
  --text-primary: #e8edff;
  --text-secondary: #9ba3c8;
  --text-muted: #7880a6;

  /* Glass */
  --glass-bg: rgba(17, 22, 40, 0.65);
  --glass-border: rgba(120, 130, 180, 0.12);
  --glass-blur: blur(24px) saturate(1.2);

  /* Spacing */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 48px;

  /* Radii */
  --radius-sm: 10px;
  --radius-md: 14px;
  --radius-lg: 20px;
  --radius-xl: 28px;
  --radius-pill: 100px;

  /* Sidebar */
  --sidebar-width: 260px;

  /* Easing */
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ─── Light Theme ─── */
[data-theme="light"] {
  --void: #f8f6f3;
  --void-deep: #f0edf5;
  --surface: #ffffff;
  --elevated: #f0edf5;
  --hover: #e8e4f0;
  --text-primary: #1a1520;
  --text-secondary: #5e5673;
  --text-muted: #8a82a0;
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(120, 100, 160, 0.15);
}

html, body {
  height: 100%;
  font-family: 'Outfit', -apple-system, sans-serif;
  background: var(--void);
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
}

/* ─── Mesh Background ─── */
.mesh-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}
.mesh-bg::before {
  content: '';
  position: absolute;
  width: 800px; height: 800px;
  top: -200px; right: -200px;
  background: radial-gradient(circle, rgba(124,58,237,0.08) 0%, transparent 70%);
  animation: meshDrift1 25s ease-in-out infinite alternate;
}
.mesh-bg::after {
  content: '';
  position: absolute;
  width: 600px; height: 600px;
  bottom: -100px; left: -100px;
  background: radial-gradient(circle, rgba(59,130,246,0.06) 0%, transparent 70%);
  animation: meshDrift2 30s ease-in-out infinite alternate;
}
@keyframes meshDrift1 { 0%{transform:translate(0,0) scale(1)} 100%{transform:translate(-80px,60px) scale(1.15)} }
@keyframes meshDrift2 { 0%{transform:translate(0,0) scale(1)} 100%{transform:translate(60px,-40px) scale(1.1)} }

/* ─── Layout ─── */
.app-layout {
  display: flex;
  min-height: 100vh;
  position: relative;
  z-index: 1;
}

/* ─── Sidebar ─── */
.sidebar {
  width: var(--sidebar-width);
  height: 100vh;
  position: fixed;
  left: 0; top: 0;
  z-index: 30;
  display: flex;
  flex-direction: column;
  background: rgba(10, 13, 24, 0.85);
  backdrop-filter: blur(32px);
  border-right: 1px solid var(--glass-border);
  padding: var(--space-md);
  overflow-y: auto;
}

[data-theme="light"] .sidebar {
  background: rgba(248, 246, 243, 0.9);
}

.sidebar-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-sm) var(--space-lg);
  border-bottom: 1px solid var(--glass-border);
  margin-bottom: var(--space-md);
}

.sidebar-logo {
  width: 36px; height: 36px;
  border-radius: var(--radius-sm);
  background: var(--grad-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.9rem;
  color: #fff;
  flex-shrink: 0;
}

.sidebar-title {
  font-size: 1rem;
  font-weight: 700;
  letter-spacing: -0.02em;
}

.sidebar-subtitle {
  font-size: 0.75rem;
  color: var(--text-muted);
  font-weight: 400;
}

.nav-group {
  margin-bottom: var(--space-lg);
}

.nav-group-label {
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  padding: 0 var(--space-sm);
  margin-bottom: var(--space-sm);
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  border-radius: var(--radius-sm);
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-family: inherit;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
  position: relative;
  margin-bottom: 2px;
  text-align: left;
}
.nav-item:hover {
  background: rgba(255,255,255,0.04);
  color: var(--text-primary);
}
[data-theme="light"] .nav-item:hover {
  background: rgba(0,0,0,0.04);
}
.nav-item.active {
  background: rgba(124,58,237,0.12);
  color: var(--text-primary);
}
.nav-item.active::before {
  content: '';
  position: absolute;
  left: 0; top: 50%;
  transform: translateY(-50%);
  width: 3px; height: 20px;
  background: var(--grad-primary);
  border-radius: 0 4px 4px 0;
}

.nav-icon {
  width: 20px; height: 20px;
  opacity: 0.7;
  flex-shrink: 0;
}
.nav-item.active .nav-icon { opacity: 1; }

.nav-badge {
  margin-left: auto;
  font-size: 0.65rem;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: var(--radius-pill);
  font-family: 'JetBrains Mono', monospace;
}
.nav-badge.success {
  background: rgba(16,185,129,0.12);
  color: var(--success);
  border: 1px solid rgba(16,185,129,0.2);
}
.nav-badge.info {
  background: rgba(124,58,237,0.1);
  color: var(--amethyst-light);
  border: 1px solid rgba(124,58,237,0.2);
}

.nav-separator {
  height: 1px;
  background: var(--glass-border);
  margin: var(--space-md) var(--space-sm);
}

/* ─── Main Content ─── */
.main-content {
  flex: 1;
  margin-left: var(--sidebar-width);
  padding: var(--space-2xl);
  max-width: 860px;
}

.page-header {
  margin-bottom: var(--space-xl);
  animation: viewEnter 0.5s var(--ease-out-expo) both;
}
.page-title {
  font-size: 1.6rem;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin-bottom: var(--space-xs);
}
.page-description {
  font-size: 0.9rem;
  color: var(--text-secondary);
}

/* ─── Glass Cards ─── */
.glass {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  position: relative;
  overflow: hidden;
}
.glass::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.03), transparent 50%);
  pointer-events: none;
}

.settings-card {
  padding: var(--space-lg);
  margin-bottom: var(--space-md);
  animation: staggerIn 0.5s var(--ease-out-expo) both;
}
.settings-card:nth-child(1) { animation-delay: 0.05s; }
.settings-card:nth-child(2) { animation-delay: 0.1s; }
.settings-card:nth-child(3) { animation-delay: 0.15s; }
.settings-card:nth-child(4) { animation-delay: 0.2s; }

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-lg);
}

.card-title-group {
  display: flex;
  align-items: center;
  gap: 12px;
}

.card-icon {
  width: 40px; height: 40px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.card-icon.purple { background: rgba(124,58,237,0.15); color: var(--amethyst-light); }
.card-icon.blue { background: rgba(59,130,246,0.15); color: var(--sapphire); }
.card-icon.green { background: rgba(16,185,129,0.15); color: var(--success); }
.card-icon.amber { background: rgba(245,158,11,0.15); color: var(--warning); }

.card-title {
  font-size: 1.05rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}
.card-subtitle {
  font-size: 0.78rem;
  color: var(--text-muted);
  margin-top: 2px;
}

/* ─── Section Labels ─── */
.section-label {
  font-size: 0.72rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: var(--space-md);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

/* ─── Form Fields ─── */
.form-grid {
  display: grid;
  gap: var(--space-md);
}
.form-grid.cols-2 {
  grid-template-columns: 1fr 1fr;
}

.form-field {
  display: grid;
  gap: 6px;
}

.form-label {
  font-size: 0.78rem;
  font-weight: 500;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.form-input, .form-select {
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-sm);
  padding: 14px 16px;
  font-family: inherit;
  font-size: 0.92rem;
  color: var(--text-primary);
  transition: all 0.2s;
  min-height: 44px;
  width: 100%;
  outline: none;
}
[data-theme="light"] .form-input,
[data-theme="light"] .form-select {
  background: rgba(0,0,0,0.03);
}
.form-input:focus, .form-select:focus {
  border-color: var(--amethyst);
  box-shadow: 0 0 0 3px rgba(124,58,237,0.15);
  background: rgba(124,58,237,0.04);
}
.form-input::placeholder {
  color: var(--text-muted);
  font-size: 0.85rem;
}

.form-select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237880a6' viewBox='0 0 16 16'%3E%3Cpath d='M4.5 6l3.5 4 3.5-4z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
  padding-right: 36px;
  cursor: pointer;
}
.form-select option {
  background: var(--surface);
  color: var(--text-primary);
}

.form-hint {
  font-size: 0.75rem;
  color: var(--text-muted);
}

.input-with-action {
  display: flex;
  gap: var(--space-sm);
}
.input-with-action .form-input {
  flex: 1;
}

/* ─── Toggles ─── */
.toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 0;
  border-bottom: 1px solid var(--glass-border);
}
.toggle-row:last-child { border-bottom: none; }

.toggle-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.toggle-title {
  font-size: 0.92rem;
  font-weight: 500;
}
.toggle-desc {
  font-size: 0.78rem;
  color: var(--text-muted);
}

.toggle {
  position: relative;
  width: 44px; height: 24px;
  flex-shrink: 0;
}
.toggle input { opacity: 0; width: 0; height: 0; }
.toggle-slider {
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.1);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s var(--ease-spring);
}
[data-theme="light"] .toggle-slider {
  background: rgba(0,0,0,0.12);
}
.toggle-slider::before {
  content: '';
  position: absolute;
  width: 18px; height: 18px;
  left: 3px; bottom: 3px;
  background: #fff;
  border-radius: 50%;
  transition: all 0.3s var(--ease-spring);
}
.toggle input:checked + .toggle-slider {
  background: var(--amethyst);
}
.toggle input:checked + .toggle-slider::before {
  transform: translateX(20px);
}

/* ─── Buttons ─── */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  border: none;
  border-radius: var(--radius-sm);
  font-family: inherit;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s var(--ease-out-expo);
  min-height: 44px;
  white-space: nowrap;
}
.btn:active { transform: translateY(0) scale(0.98); }

.btn-primary {
  background: var(--grad-primary);
  color: #fff;
  padding: 12px 24px;
  font-size: 0.9rem;
}
.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 24px -4px rgba(124,58,237,0.3);
}

.btn-ghost {
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--glass-border);
  color: var(--text-primary);
  padding: 10px 16px;
  font-size: 0.82rem;
}
[data-theme="light"] .btn-ghost {
  background: rgba(0,0,0,0.03);
}
.btn-ghost:hover {
  background: rgba(255,255,255,0.08);
  border-color: rgba(120,130,180,0.25);
}

.btn-danger {
  background: rgba(239,68,68,0.1);
  border: 1px solid rgba(239,68,68,0.2);
  color: #f87171;
  padding: 10px 16px;
  font-size: 0.82rem;
}
.btn-danger:hover {
  background: rgba(239,68,68,0.18);
}

.btn-sm {
  padding: 8px 14px;
  font-size: 0.78rem;
  min-height: 36px;
  border-radius: 8px;
}

.btn-icon {
  width: 36px; height: 36px;
  padding: 0;
  border-radius: 10px;
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--glass-border);
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-icon:hover {
  background: rgba(255,255,255,0.08);
  color: var(--text-primary);
}

/* ─── Status Badge ─── */
.badge {
  font-size: 0.7rem;
  font-weight: 500;
  padding: 3px 10px;
  border-radius: var(--radius-pill);
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: 0.02em;
}
.badge-success {
  background: rgba(16,185,129,0.12);
  color: #34d399;
  border: 1px solid rgba(16,185,129,0.2);
}
.badge-warning {
  background: rgba(245,158,11,0.12);
  color: #fbbf24;
  border: 1px solid rgba(245,158,11,0.2);
}
.badge-danger {
  background: rgba(239,68,68,0.12);
  color: #f87171;
  border: 1px solid rgba(239,68,68,0.2);
}
.badge-muted {
  background: rgba(120,130,180,0.08);
  color: var(--text-muted);
  border: 1px solid var(--glass-border);
}

/* ─── API Token Table ─── */
.token-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}
.token-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  background: rgba(255,255,255,0.02);
  border: 1px solid transparent;
  transition: all 0.2s;
}
.token-item:hover {
  background: rgba(255,255,255,0.04);
  border-color: var(--glass-border);
}
.token-name {
  font-weight: 500;
  font-size: 0.9rem;
}
.token-date {
  font-size: 0.75rem;
  color: var(--text-muted);
  font-family: 'JetBrains Mono', monospace;
}
.token-actions {
  margin-left: auto;
  display: flex;
  gap: var(--space-xs);
}

/* ─── Cooldown Table ─── */
.cooldown-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}
.cooldown-table th {
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  padding: 8px 12px;
  text-align: left;
  border-bottom: 1px solid var(--glass-border);
}
.cooldown-table td {
  padding: 12px;
  border-bottom: 1px solid rgba(120,130,180,0.06);
  font-size: 0.88rem;
}
.cooldown-table tr:last-child td { border-bottom: none; }
.cooldown-table .event-name {
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
}
.cooldown-table .cooldown-input {
  width: 80px;
  padding: 8px 10px;
  font-size: 0.82rem;
  text-align: center;
}

/* ─── Module Cards ─── */
.module-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: var(--space-md);
}

.module-card {
  padding: var(--space-lg);
  border-radius: var(--radius-md);
  background: rgba(255,255,255,0.02);
  border: 1px solid var(--glass-border);
  transition: all 0.25s var(--ease-out-expo);
  cursor: pointer;
  position: relative;
}
.module-card:hover {
  background: rgba(255,255,255,0.04);
  border-color: rgba(120,130,180,0.2);
  transform: translateY(-2px);
}
.module-card.active {
  border-color: rgba(124,58,237,0.3);
  box-shadow: 0 0 0 1px rgba(124,58,237,0.15), 0 8px 32px -8px rgba(124,58,237,0.1);
}

.module-card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 12px;
}
.module-card-icon {
  width: 36px; height: 36px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
}
.module-card-title {
  font-weight: 600;
  font-size: 0.95rem;
  margin-bottom: 4px;
}
.module-card-desc {
  font-size: 0.78rem;
  color: var(--text-muted);
  line-height: 1.4;
}
.module-card-meta {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-top: 12px;
  font-size: 0.7rem;
  color: var(--text-muted);
  font-family: 'JetBrains Mono', monospace;
}

/* ─── Module Store Header ─── */
.store-header {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}
.store-search {
  flex: 1;
  position: relative;
}
.store-search .form-input {
  padding-left: 40px;
}
.store-search-icon {
  position: absolute;
  left: 14px; top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  pointer-events: none;
}

/* ─── Support Section ─── */
.support-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
}
.support-card {
  padding: var(--space-lg);
  border-radius: var(--radius-md);
  background: rgba(255,255,255,0.02);
  border: 1px solid var(--glass-border);
  text-align: center;
  transition: all 0.25s var(--ease-out-expo);
  cursor: pointer;
  text-decoration: none;
  color: inherit;
  display: block;
}
.support-card:hover {
  background: rgba(255,255,255,0.05);
  transform: translateY(-2px);
  border-color: rgba(120,130,180,0.25);
}
.support-card-icon {
  font-size: 1.8rem;
  margin-bottom: 12px;
}
.support-card-title {
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 4px;
}
.support-card-desc {
  font-size: 0.78rem;
  color: var(--text-muted);
}

/* ─── Save Footer ─── */
.save-footer {
  position: fixed;
  bottom: 0;
  left: var(--sidebar-width);
  right: 0;
  padding: 16px var(--space-2xl);
  background: rgba(10,13,24,0.9);
  backdrop-filter: blur(20px);
  border-top: 1px solid var(--glass-border);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--space-md);
  z-index: 20;
  transform: translateY(100%);
  transition: transform 0.3s var(--ease-out-expo);
}
[data-theme="light"] .save-footer {
  background: rgba(248,246,243,0.9);
}
.save-footer.visible {
  transform: translateY(0);
}
.save-footer .unsaved-hint {
  font-size: 0.82rem;
  color: var(--text-muted);
  margin-right: auto;
  display: flex;
  align-items: center;
  gap: 8px;
}
.unsaved-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--warning);
  animation: pulse 2s infinite;
}

/* ─── Theme Toggle (top right) ─── */
.theme-toggle {
  position: fixed;
  top: var(--space-md);
  right: var(--space-md);
  z-index: 40;
}

/* ─── Animations ─── */
@keyframes viewEnter {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes staggerIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* ─── Panels ─── */
.settings-panel { display: none; }
.settings-panel.active { display: block; }

/* ─── Glow ─── */
.glow-purple {
  box-shadow: 0 0 0 1px rgba(124,58,237,0.15), 0 8px 32px -8px rgba(124,58,237,0.15);
}

/* ─── Scrollbar ─── */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: rgba(120,130,180,0.2);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover { background: rgba(120,130,180,0.35); }

/* ─── Responsive ─── */
@media (max-width: 768px) {
  .sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s var(--ease-out-expo);
  }
  .sidebar.open { transform: translateX(0); }
  .main-content {
    margin-left: 0;
    padding: var(--space-lg);
  }
  .form-grid.cols-2 { grid-template-columns: 1fr; }
  .support-grid { grid-template-columns: 1fr; }
  .save-footer { left: 0; }
  .mobile-header {
    display: flex !important;
  }
}

.mobile-header {
  display: none;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
}

/* ─── Connection Status Indicator ─── */
.status-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: var(--radius-sm);
  font-size: 0.82rem;
  font-weight: 500;
}
.status-indicator.connected {
  background: rgba(16,185,129,0.08);
  border: 1px solid rgba(16,185,129,0.15);
  color: var(--success);
}
.status-indicator.disconnected {
  background: rgba(239,68,68,0.08);
  border: 1px solid rgba(239,68,68,0.15);
  color: var(--danger);
}
.status-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: currentColor;
  animation: pulse 2s infinite;
}
</style>
</head>
<body>

<div class="mesh-bg"></div>

<!-- Theme Toggle -->
<div class="theme-toggle">
  <button class="btn-icon" onclick="toggleTheme()" title="Theme wechseln">
    <svg id="themeIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
  </button>
</div>

<div class="app-layout">

  <!-- ═══ SIDEBAR ═══ -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">DS</div>
      <div>
        <div class="sidebar-title">DOCSight</div>
        <div class="sidebar-subtitle">Settings</div>
      </div>
    </div>

    <!-- CORE -->
    <div class="nav-group">
      <div class="nav-group-label">Core</div>

      <button class="nav-item active" onclick="switchPanel('connection')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"/></svg>
        Connection
        <span class="nav-badge success">OK</span>
      </button>

      <button class="nav-item" onclick="switchPanel('system')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        System
      </button>

      <button class="nav-item" onclick="switchPanel('notifications')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
        Notifications
      </button>

      <button class="nav-item" onclick="switchPanel('appearance')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
        Appearance
      </button>

      <button class="nav-item" onclick="switchPanel('security')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        Security
      </button>
    </div>

    <div class="nav-separator"></div>

    <!-- MODULES -->
    <div class="nav-group">
      <div class="nav-group-label">Modules</div>

      <button class="nav-item" onclick="switchPanel('mqtt')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 2 4.2 6.8a2.1 2.1 0 0 0 0 3l.9.8"/><path d="m16 8-2.3-2.3"/><path d="m8 16 2.3 2.3"/><path d="M15 2c5 2 8 7 8 12"/><path d="M2 15c2 5 7 8 12 8"/></svg>
        MQTT
        <span class="nav-badge success">ON</span>
      </button>

      <button class="nav-item" onclick="switchPanel('backup')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        Backup
        <span class="nav-badge success">ON</span>
      </button>

      <button class="nav-item" onclick="switchPanel('speedtest')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"/><path d="M12 7v5l3 3"/></svg>
        Speedtest
        <span class="nav-badge info">OFF</span>
      </button>

      <button class="nav-item" onclick="switchPanel('bqm')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
        BQM
        <span class="nav-badge info">OFF</span>
      </button>
    </div>

    <div class="nav-separator"></div>

    <!-- MODULE STORE -->
    <div class="nav-group">
      <button class="nav-item" onclick="switchPanel('store')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
        Module Store
        <span class="nav-badge info">12</span>
      </button>
    </div>

    <!-- BOTTOM: Support -->
    <div style="margin-top:auto;">
      <div class="nav-separator"></div>
      <button class="nav-item" onclick="switchPanel('support')">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
        Support DOCSight
      </button>
    </div>
  </nav>

  <!-- ═══ MAIN CONTENT ═══ -->
  <main class="main-content">

    <!-- ──── CONNECTION ──── -->
    <div class="settings-panel active" id="panel-connection">
      <div class="page-header">
        <h1 class="page-title">Connection</h1>
        <p class="page-description">Configure your modem connection and ISP settings.</p>
      </div>

      <!-- Modem -->
      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon purple">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="6" width="20" height="12" rx="2"/><path d="M6 12h.01"/><path d="M10 12h.01"/><path d="M14 12h.01"/><path d="M18 12h.01"/></svg>
            </div>
            <div>
              <div class="card-title">Modem</div>
              <div class="card-subtitle">Connection to your cable modem</div>
            </div>
          </div>
          <div class="status-indicator connected">
            <span class="status-dot"></span>
            Connected
          </div>
        </div>

        <div class="form-grid cols-2">
          <div class="form-field" style="grid-column: 1 / -1">
            <label class="form-label">Modem Type</label>
            <select class="form-input form-select">
              <option>FritzBox 6690 Cable</option>
              <option>Vodafone Station</option>
              <option>Compal CH7465LG</option>
              <option>Technicolor TC4400</option>
              <option>Hitron CODA-4582</option>
              <option>Sagemcom F@st 3890</option>
            </select>
          </div>
          <div class="form-field">
            <label class="form-label">URL</label>
            <input class="form-input" type="text" value="http://192.168.178.1" placeholder="http://192.168.178.1">
          </div>
          <div class="form-field">
            <label class="form-label">Username</label>
            <input class="form-input" type="text" placeholder="Optional">
          </div>
          <div class="form-field" style="grid-column: 1 / -1">
            <label class="form-label">Password</label>
            <div class="input-with-action">
              <input class="form-input" type="password" value="••••••••••">
              <button class="btn btn-ghost" onclick="this.closest('.input-with-action').querySelector('input').type = this.closest('.input-with-action').querySelector('input').type === 'password' ? 'text' : 'password'">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
              </button>
            </div>
          </div>
        </div>

        <div style="margin-top: var(--space-lg); display:flex; gap: var(--space-sm);">
          <button class="btn btn-ghost">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            Test Connection
          </button>
        </div>
      </div>

      <!-- ISP -->
      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon blue">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10H12V2Z"/><path d="M20.59 13.41A10 10 0 0 1 12 22V12h10a10 10 0 0 0-1.41-1.41"/></svg>
            </div>
            <div>
              <div class="card-title">Internet Service Provider</div>
              <div class="card-subtitle">Your cable provider for reference data</div>
            </div>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-field">
            <label class="form-label">Provider</label>
            <select class="form-input form-select">
              <option>Vodafone</option>
              <option>Telekom</option>
              <option>O2</option>
              <option>PYUR</option>
              <option selected>Other</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- ──── SYSTEM ──── -->
    <div class="settings-panel" id="panel-system">
      <div class="page-header">
        <h1 class="page-title">System</h1>
        <p class="page-description">Polling, data retention, and localization settings.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon purple">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            </div>
            <div>
              <div class="card-title">Data Collection</div>
              <div class="card-subtitle">How often and how long data is stored</div>
            </div>
          </div>
        </div>

        <div class="form-grid cols-2">
          <div class="form-field">
            <label class="form-label">Poll Interval</label>
            <div class="input-with-action">
              <input class="form-input" type="number" value="120" min="60" max="14400">
              <span style="color:var(--text-muted); font-size:0.82rem; align-self:center; white-space:nowrap">seconds</span>
            </div>
            <span class="form-hint">Min 60s, max 14400s (4h)</span>
          </div>
          <div class="form-field">
            <label class="form-label">History Retention</label>
            <div class="input-with-action">
              <input class="form-input" type="number" value="90" min="1">
              <span style="color:var(--text-muted); font-size:0.82rem; align-self:center; white-space:nowrap">days</span>
            </div>
          </div>
          <div class="form-field">
            <label class="form-label">Daily Snapshot</label>
            <input class="form-input" type="time" value="03:00">
            <span class="form-hint">Time for the daily summary snapshot</span>
          </div>
        </div>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon blue">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
            </div>
            <div>
              <div class="card-title">Localization</div>
              <div class="card-subtitle">Language and timezone</div>
            </div>
          </div>
        </div>

        <div class="form-grid cols-2">
          <div class="form-field">
            <label class="form-label">Language</label>
            <select class="form-input form-select">
              <option>English</option>
              <option selected>Deutsch</option>
            </select>
          </div>
          <div class="form-field">
            <label class="form-label">Timezone</label>
            <select class="form-input form-select">
              <option selected>Europe/Berlin</option>
              <option>Europe/London</option>
              <option>America/New_York</option>
              <option>UTC</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- ──── NOTIFICATIONS ──── -->
    <div class="settings-panel" id="panel-notifications">
      <div class="page-header">
        <h1 class="page-title">Notifications</h1>
        <p class="page-description">Configure webhook alerts for signal quality events.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon amber">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
            </div>
            <div>
              <div class="card-title">Webhook</div>
              <div class="card-subtitle">Send alerts to external services</div>
            </div>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-field">
            <label class="form-label">Webhook URL</label>
            <input class="form-input" type="url" placeholder="https://hooks.example.com/...">
          </div>
          <div class="form-grid cols-2">
            <div class="form-field">
              <label class="form-label">Bearer Token</label>
              <input class="form-input" type="password" placeholder="Optional">
            </div>
            <div class="form-field">
              <label class="form-label">Min. Severity</label>
              <select class="form-input form-select">
                <option>Info</option>
                <option selected>Warning</option>
                <option>Critical</option>
              </select>
            </div>
          </div>
          <div class="form-field">
            <label class="form-label">Default Cooldown</label>
            <div class="input-with-action">
              <input class="form-input" type="number" value="300" min="0">
              <span style="color:var(--text-muted); font-size:0.82rem; align-self:center; white-space:nowrap">seconds</span>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon purple">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
            </div>
            <div>
              <div class="card-title">Per-Event Cooldowns</div>
              <div class="card-subtitle">Fine-tune notification frequency per event type</div>
            </div>
          </div>
        </div>

        <table class="cooldown-table">
          <thead>
            <tr>
              <th>Event</th>
              <th>Enabled</th>
              <th>Cooldown (s)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="event-name"><span class="badge badge-danger">crit</span> Health Change</span></td>
              <td><label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label></td>
              <td><input class="form-input cooldown-input" type="number" value="300"></td>
            </tr>
            <tr>
              <td><span class="event-name"><span class="badge badge-warning">warn</span> Power Change</span></td>
              <td><label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label></td>
              <td><input class="form-input cooldown-input" type="number" value="600"></td>
            </tr>
            <tr>
              <td><span class="event-name"><span class="badge badge-warning">warn</span> SNR Change</span></td>
              <td><label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label></td>
              <td><input class="form-input cooldown-input" type="number" value="600"></td>
            </tr>
            <tr>
              <td><span class="event-name"><span class="badge badge-muted">info</span> Channel Change</span></td>
              <td><label class="toggle"><input type="checkbox"><span class="toggle-slider"></span></label></td>
              <td><input class="form-input cooldown-input" type="number" value="900"></td>
            </tr>
            <tr>
              <td><span class="event-name"><span class="badge badge-muted">info</span> Modulation Change</span></td>
              <td><label class="toggle"><input type="checkbox"><span class="toggle-slider"></span></label></td>
              <td><input class="form-input cooldown-input" type="number" value="900"></td>
            </tr>
            <tr>
              <td><span class="event-name"><span class="badge badge-warning">warn</span> Error Spike</span></td>
              <td><label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label></td>
              <td><input class="form-input cooldown-input" type="number" value="300"></td>
            </tr>
            <tr>
              <td><span class="event-name"><span class="badge badge-success">ok</span> Monitoring Started</span></td>
              <td><label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label></td>
              <td><input class="form-input cooldown-input" type="number" value="0"></td>
            </tr>
          </tbody>
        </table>

        <div style="margin-top: var(--space-lg);">
          <button class="btn btn-ghost">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 2 11 13"/><path d="M22 2 15 22l-4-9-9-4 20-7z"/></svg>
            Send Test Notification
          </button>
        </div>
      </div>
    </div>

    <!-- ──── APPEARANCE ──── -->
    <div class="settings-panel" id="panel-appearance">
      <div class="page-header">
        <h1 class="page-title">Appearance</h1>
        <p class="page-description">Customize the look and feel of DOCSight.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon purple">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
            </div>
            <div>
              <div class="card-title">Theme & Display</div>
              <div class="card-subtitle">Visual preferences</div>
            </div>
          </div>
        </div>

        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-title">Dark Mode</span>
            <span class="toggle-desc">Use dark color scheme</span>
          </div>
          <label class="toggle">
            <input type="checkbox" checked id="darkToggle" onchange="toggleTheme()">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-title">Gaming Quality Index</span>
            <span class="toggle-desc">Show latency-focused quality score on the dashboard</span>
          </div>
          <label class="toggle">
            <input type="checkbox">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-title">BNetzA Upload</span>
            <span class="toggle-desc">Enable measurement export for Bundesnetzagentur</span>
          </div>
          <label class="toggle">
            <input type="checkbox">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- ──── SECURITY ──── -->
    <div class="settings-panel" id="panel-security">
      <div class="page-header">
        <h1 class="page-title">Security</h1>
        <p class="page-description">Admin password and API access tokens.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon purple">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </div>
            <div>
              <div class="card-title">Admin Password</div>
              <div class="card-subtitle">Protect access to settings</div>
            </div>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-field">
            <label class="form-label">New Password</label>
            <input class="form-input" type="password" placeholder="Leave empty to keep current">
          </div>
        </div>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon blue">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
            </div>
            <div>
              <div class="card-title">API Tokens</div>
              <div class="card-subtitle">Manage access tokens for the REST API</div>
            </div>
          </div>
          <button class="btn btn-ghost btn-sm" onclick="document.getElementById('newTokenName').focus()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Create Token
          </button>
        </div>

        <div class="form-grid" style="margin-bottom: var(--space-md);">
          <div class="input-with-action">
            <input class="form-input" type="text" id="newTokenName" placeholder="Token name, e.g. 'Home Assistant'">
            <button class="btn btn-primary btn-sm">Create</button>
          </div>
        </div>

        <div class="token-list">
          <div class="token-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
            <div>
              <div class="token-name">Home Assistant</div>
              <div class="token-date">Created 2026-01-15</div>
            </div>
            <div class="token-actions">
              <button class="btn-icon" title="Revoke"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button>
            </div>
          </div>
          <div class="token-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
            <div>
              <div class="token-name">Grafana</div>
              <div class="token-date">Created 2026-02-10</div>
            </div>
            <div class="token-actions">
              <button class="btn-icon" title="Revoke"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ──── MQTT ──── -->
    <div class="settings-panel" id="panel-mqtt">
      <div class="page-header">
        <h1 class="page-title">MQTT</h1>
        <p class="page-description">Publish modem metrics to an MQTT broker for Home Assistant, Grafana, etc.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon green">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 2 4.2 6.8a2.1 2.1 0 0 0 0 3l.9.8"/><path d="m16 8-2.3-2.3"/><path d="m8 16 2.3 2.3"/><path d="M15 2c5 2 8 7 8 12"/><path d="M2 15c2 5 7 8 12 8"/></svg>
            </div>
            <div>
              <div class="card-title">Broker Connection</div>
              <div class="card-subtitle">MQTT broker settings</div>
            </div>
          </div>
          <div class="status-indicator connected">
            <span class="status-dot"></span>
            Connected
          </div>
        </div>

        <div class="form-grid cols-2">
          <div class="form-field">
            <label class="form-label">Host</label>
            <input class="form-input" type="text" value="192.168.178.15" placeholder="broker.local">
          </div>
          <div class="form-field">
            <label class="form-label">Port</label>
            <input class="form-input" type="number" value="1883">
          </div>
          <div class="form-field">
            <label class="form-label">Username</label>
            <input class="form-input" type="text" placeholder="Optional">
          </div>
          <div class="form-field">
            <label class="form-label">Password</label>
            <input class="form-input" type="password" placeholder="Optional">
          </div>
          <div class="form-field">
            <label class="form-label">Topic Prefix</label>
            <input class="form-input" type="text" value="docsight" placeholder="docsight">
          </div>
          <div class="form-field">
            <label class="form-label">Discovery Prefix</label>
            <input class="form-input" type="text" value="homeassistant" placeholder="homeassistant">
          </div>
        </div>

        <div class="toggle-row" style="margin-top: var(--space-md);">
          <div class="toggle-info">
            <span class="toggle-title">TLS Encryption</span>
            <span class="toggle-desc">Use secure connection to MQTT broker</span>
          </div>
          <label class="toggle">
            <input type="checkbox">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div style="margin-top: var(--space-lg); display:flex; gap: var(--space-sm);">
          <button class="btn btn-ghost">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            Test Connection
          </button>
        </div>
      </div>
    </div>

    <!-- ──── BACKUP ──── -->
    <div class="settings-panel" id="panel-backup">
      <div class="page-header">
        <h1 class="page-title">Backup</h1>
        <p class="page-description">Automated and manual backup configuration.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon green">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
            </div>
            <div>
              <div class="card-title">Backup Settings</div>
              <div class="card-subtitle">Protect your data and configuration</div>
            </div>
          </div>
          <button class="btn btn-ghost btn-sm">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            Download Now
          </button>
        </div>

        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-title">Automatic Backups</span>
            <span class="toggle-desc">Schedule regular backups of your data</span>
          </div>
          <label class="toggle">
            <input type="checkbox" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="form-grid cols-2" style="margin-top: var(--space-md);">
          <div class="form-field">
            <label class="form-label">Interval</label>
            <select class="form-input form-select">
              <option selected>Daily</option>
              <option>Weekly</option>
            </select>
          </div>
          <div class="form-field">
            <label class="form-label">Retention</label>
            <div class="input-with-action">
              <input class="form-input" type="number" value="7" min="1">
              <span style="color:var(--text-muted); font-size:0.82rem; align-self:center; white-space:nowrap">backups</span>
            </div>
          </div>
          <div class="form-field" style="grid-column: 1 / -1">
            <label class="form-label">Backup Directory</label>
            <div class="input-with-action">
              <input class="form-input" type="text" value="/data/backups" placeholder="/data/backups">
              <button class="btn btn-ghost btn-sm">Browse</button>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon blue">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>
            </div>
            <div>
              <div class="card-title">Existing Backups</div>
              <div class="card-subtitle">2 backups, 4.2 MB total</div>
            </div>
          </div>
        </div>

        <div class="token-list">
          <div class="token-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/></svg>
            <div>
              <div class="token-name">backup-2026-02-28.zip</div>
              <div class="token-date">2.1 MB &middot; Today 03:00</div>
            </div>
            <div class="token-actions">
              <button class="btn-icon" title="Download"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></button>
              <button class="btn-icon" title="Delete"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button>
            </div>
          </div>
          <div class="token-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/></svg>
            <div>
              <div class="token-name">backup-2026-02-27.zip</div>
              <div class="token-date">2.1 MB &middot; Yesterday 03:00</div>
            </div>
            <div class="token-actions">
              <button class="btn-icon" title="Download"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></button>
              <button class="btn-icon" title="Delete"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ──── SPEEDTEST ──── -->
    <div class="settings-panel" id="panel-speedtest">
      <div class="page-header">
        <h1 class="page-title">Speedtest</h1>
        <p class="page-description">Connect to Speedtest Tracker for bandwidth monitoring.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon blue">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"/><path d="M12 7v5l3 3"/></svg>
            </div>
            <div>
              <div class="card-title">Speedtest Tracker</div>
              <div class="card-subtitle">External speedtest integration</div>
            </div>
          </div>
          <div class="status-indicator disconnected">
            <span class="status-dot"></span>
            Not configured
          </div>
        </div>

        <div class="form-grid cols-2">
          <div class="form-field" style="grid-column: 1 / -1">
            <label class="form-label">Speedtest Tracker URL</label>
            <input class="form-input" type="url" placeholder="http://speedtest.local:8080">
          </div>
          <div class="form-field" style="grid-column: 1 / -1">
            <label class="form-label">API Token</label>
            <input class="form-input" type="password" placeholder="Your Speedtest Tracker API token">
          </div>
          <div class="form-field">
            <label class="form-label">Booked Download</label>
            <div class="input-with-action">
              <input class="form-input" type="number" placeholder="1000">
              <span style="color:var(--text-muted); font-size:0.82rem; align-self:center; white-space:nowrap">Mbit/s</span>
            </div>
          </div>
          <div class="form-field">
            <label class="form-label">Booked Upload</label>
            <div class="input-with-action">
              <input class="form-input" type="number" placeholder="50">
              <span style="color:var(--text-muted); font-size:0.82rem; align-self:center; white-space:nowrap">Mbit/s</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ──── BQM ──── -->
    <div class="settings-panel" id="panel-bqm">
      <div class="page-header">
        <h1 class="page-title">BQM</h1>
        <p class="page-description">ThinkBroadband Broadband Quality Monitor integration.</p>
      </div>

      <div class="settings-card glass">
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-icon blue">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
            </div>
            <div>
              <div class="card-title">BQM Settings</div>
              <div class="card-subtitle">Broadband quality monitoring via ThinkBroadband</div>
            </div>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-field">
            <label class="form-label">BQM Share URL</label>
            <input class="form-input" type="url" placeholder="https://www.thinkbroadband.com/broadband/monitoring/quality/share/...">
          </div>
          <div class="form-field">
            <label class="form-label">Collection Time</label>
            <input class="form-input" type="time" value="06:00">
            <span class="form-hint">When to fetch daily BQM data</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ──── MODULE STORE ──── -->
    <div class="settings-panel" id="panel-store">
      <div class="page-header">
        <h1 class="page-title">Module Store</h1>
        <p class="page-description">Discover and install community modules to extend DOCSight.</p>
      </div>

      <div class="store-header">
        <div class="store-search">
          <svg class="store-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input class="form-input" type="text" placeholder="Search modules...">
        </div>
      </div>

      <div class="section-label">Installed</div>
      <div class="module-grid" style="margin-bottom: var(--space-xl);">
        <div class="module-card active glass">
          <div class="module-card-header">
            <div class="module-card-icon" style="background:rgba(16,185,129,0.15); color:var(--success);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 2 4.2 6.8a2.1 2.1 0 0 0 0 3l.9.8"/><path d="m16 8-2.3-2.3"/><path d="m8 16 2.3 2.3"/><path d="M15 2c5 2 8 7 8 12"/><path d="M2 15c2 5 7 8 12 8"/></svg>
            </div>
            <label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label>
          </div>
          <div class="module-card-title">MQTT</div>
          <div class="module-card-desc">Publish metrics to MQTT brokers for Home Assistant integration.</div>
          <div class="module-card-meta">
            <span>v1.2.0</span>
            <span>&middot;</span>
            <span>Built-in</span>
          </div>
        </div>

        <div class="module-card active glass">
          <div class="module-card-header">
            <div class="module-card-icon" style="background:rgba(59,130,246,0.15); color:var(--sapphire);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
            </div>
            <label class="toggle"><input type="checkbox" checked><span class="toggle-slider"></span></label>
          </div>
          <div class="module-card-title">Backup</div>
          <div class="module-card-desc">Automated backups with configurable retention and scheduling.</div>
          <div class="module-card-meta">
            <span>v1.0.0</span>
            <span>&middot;</span>
            <span>Built-in</span>
          </div>
        </div>
      </div>

      <div class="section-label">Available</div>
      <div class="module-grid">
        <div class="module-card glass">
          <div class="module-card-header">
            <div class="module-card-icon" style="background:rgba(124,58,237,0.15); color:var(--amethyst-light);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
            </div>
            <button class="btn btn-ghost btn-sm">Install</button>
          </div>
          <div class="module-card-title">Prometheus Export</div>
          <div class="module-card-desc">Expose /metrics endpoint for Prometheus scraping.</div>
          <div class="module-card-meta">
            <span>v0.3.0</span>
            <span>&middot;</span>
            <span>Community</span>
          </div>
        </div>

        <div class="module-card glass">
          <div class="module-card-header">
            <div class="module-card-icon" style="background:rgba(245,158,11,0.15); color:var(--warning);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
            </div>
            <button class="btn btn-ghost btn-sm">Install</button>
          </div>
          <div class="module-card-title">Reboot Detector</div>
          <div class="module-card-desc">Detect modem restarts via error counter resets.</div>
          <div class="module-card-meta">
            <span>v0.1.0</span>
            <span>&middot;</span>
            <span>Community</span>
          </div>
        </div>

        <div class="module-card glass">
          <div class="module-card-header">
            <div class="module-card-icon" style="background:rgba(6,182,212,0.15); color:var(--info);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
            </div>
            <button class="btn btn-ghost btn-sm">Install</button>
          </div>
          <div class="module-card-title">InfluxDB Export</div>
          <div class="module-card-desc">Stream channel data to InfluxDB for Grafana dashboards.</div>
          <div class="module-card-meta">
            <span>v0.2.1</span>
            <span>&middot;</span>
            <span>Community</span>
          </div>
        </div>

        <div class="module-card glass">
          <div class="module-card-header">
            <div class="module-card-icon" style="background:rgba(239,68,68,0.15); color:var(--danger);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
            </div>
            <button class="btn btn-ghost btn-sm">Install</button>
          </div>
          <div class="module-card-title">Outage Tracker</div>
          <div class="module-card-desc">Track and log internet outages with duration and cause analysis.</div>
          <div class="module-card-meta">
            <span>v0.4.0</span>
            <span>&middot;</span>
            <span>Community</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ──── SUPPORT ──── -->
    <div class="settings-panel" id="panel-support">
      <div class="page-header">
        <h1 class="page-title">Support DOCSight</h1>
        <p class="page-description">DOCSight is free and open source. Your support helps keep it that way.</p>
      </div>

      <div class="support-grid">
        <a class="support-card glass" href="#">
          <div class="support-card-icon">&#9829;</div>
          <div class="support-card-title">GitHub Sponsors</div>
          <div class="support-card-desc">Monthly or one-time sponsorship</div>
        </a>
        <a class="support-card glass" href="#">
          <div class="support-card-icon">&#9749;</div>
          <div class="support-card-title">Ko-fi</div>
          <div class="support-card-desc">Buy me a coffee</div>
        </a>
        <a class="support-card glass" href="#">
          <div class="support-card-icon">&#128171;</div>
          <div class="support-card-title">PayPal</div>
          <div class="support-card-desc">Direct donation</div>
        </a>
      </div>
    </div>

  </main>
</div>

<!-- ═══ SAVE FOOTER ═══ -->
<div class="save-footer visible" id="saveFooter">
  <div class="unsaved-hint">
    <span class="unsaved-dot"></span>
    Unsaved changes
  </div>
  <button class="btn btn-ghost" onclick="document.getElementById('saveFooter').classList.remove('visible')">Discard</button>
  <button class="btn btn-primary">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
    Save Changes
  </button>
</div>

<script>
function switchPanel(id) {
  // Hide all panels
  document.querySelectorAll('.settings-panel').forEach(p => p.classList.remove('active'));
  // Deactivate all nav items
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  // Show target
  const panel = document.getElementById('panel-' + id);
  if (panel) {
    panel.classList.add('active');
    // Re-trigger animations
    panel.querySelectorAll('.settings-card').forEach((card, i) => {
      card.style.animation = 'none';
      card.offsetHeight; // reflow
      card.style.animation = `staggerIn 0.5s var(--ease-out-expo) ${i * 0.05}s both`;
    });
  }
  // Activate nav item
  event.currentTarget.classList.add('active');
  // Close mobile sidebar
  document.getElementById('sidebar').classList.remove('open');
}

function toggleTheme() {
  const html = document.documentElement;
  const isDark = html.getAttribute('data-theme') === 'dark';
  html.setAttribute('data-theme', isDark ? 'light' : 'dark');
  const toggle = document.getElementById('darkToggle');
  if (toggle) toggle.checked = !isDark;
}
</script>
</body>
</html>
